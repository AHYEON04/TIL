# 프로토타입



Proatotype vs  Class

자바스크립트가 객체 지향언어라는 점과는 달리 클래스라는 개념이 없다. 자바스크립트가 프로토타입 기반 언어라고 불리는 이유로 대신 프로토타입이라는 것이 존재하기 때문이다.

클래스가 없으므로 기본적으로 상속기능도 없음. 그래서 보통 프로토타입을 기반으로 상속을 흉내내도록 구현해 사용함.



자바스크립트에 클래스는 없지만 함수(funtion)과 new를 통해 클래스를 비슷하게 흉내낼 수 있음.

```javascript
function Person() {
  this.eyes = 2;
  this.nose = 1;
}
var kim  = new Person();
var park = new Person();
console.log(kim.eyes);  // => 2
console.log(kim.nose);  // => 1
console.log(park.eyes); // => 2
console.log(park.nose); // => 1
```

kim과 park는 eyes와 nose를 공통적으로 가지고 있는데, 메모리에는 eyes와 nose가 두 개씩 총 4개가 할당됨. 객체를 100개를 만들면 200개의 변수가 메모리에 할당됨. **바로 이 문제를 프로토타입으로 해결 가능함.**

```javascript
function Person() {}
Person.prototype.eyes = 2;
Person.prototype.nose = 1;
var kim  = new Person();
var park = new Person():
console.log(kim.eyes); // => 2
...
```

 Person.prototype이라는 빈 Object가 어딘가에 존재하고, Person 함수로붕터 생성된 객체들은 어딘가에 존재하는 Object에 들어있는 값을 모두 쓸수 있음.

즉, eyes와 nose를 어딘가에 있는 빈 공간에 넣어놓고 kim과 park를 공유해서 사용함.



### Prototype Link와 Prototype Object

자바스크립트에는 Prototype Link와 Prototype  Object라는 것이 존재함.그리고 이 둘을 통틀어 Prototype 이라고 부름. 

#### prototype object

객체는 언제나 함수로 생성됨

```javascript
function Person() {} // => 함수
var personObject = new Person(); // => 함수로 객체를 생성
```

personObject 객체는 Person이라는 함수로 생성된 객체임. 이렇듯 언제나 객체는 함수에서 시작됨.

`var obj = { };` 얼핏보면 함수와 전혀 상관없는 코드로 보이지만 `var obj = new obj( );` 과 같다. 

위 코드에서 Object가 자바스크립트에서 기본적으로 제공하는 **함수**임.

Object와 마찬가지로 Function, Array도 모두 함수로 정의되어 있음. 

#### 함수가 정의될 때 일어나는 2가지 일

1.해당함수에 constructor(생성자) 자격 부여

constructor 자격이 부여되면 new를 통해 객체를 만들어 낼  수 있게 됨. 이 때문에 함수만 new 키워드를 사용할 수 있음.

2. 해당 함수의 Prototype Object 생성 및 연결

함수를 정의하면 함수만 생성되는 것이 아니라 Prototype Object도 같이 생성됨. 그리고 생성된 함수는 Prototype이라는 속성을 통해 Prototype 이라는 속성을 통해 Prototype Object에 접근할 수 있음. Prototype Object는 일반적인 객체와 같으며 기본적인 속성으로 constructor와 __ proto __를 가지고 있음.

#### Prototype Link

kim에는 eyes라는 속성이 없는데도 kim.eyes를 실해하면 2라는 값을 참조하는 것을 볼 수 있는데 이것은 Prototype Object에 존재하는 eyes 속성을 참조한 것이다. 이게 가능한 이유는 kim이 가지고 있는 속성 __ proto__ 때문이다.

__ proto __는 객체가 생성될 때 조상이었던 함수의 Prototype Object를 가리킨다. kim 객체는 Person함수로부터 생성되었으니 Person함수의 Prototype Object를 가리킴.

kim객체가 eyes를 직접 가지고 있지 않기 때문에 eyes 속성을 찾을 때까지 상위 프로토타입을 탐색한다. 최상위인 Object의 Prototype Object까지 도달했는데도 못찾았을 경우 undefined를 리턴한다. 이렇게 __ proto __ 속성을 통해 상위 프로토타입과 연결되어 있는 형태를 **프로토 체인**이라고 한다.

이 체인 구조 때문에 모든 객체는 Object의 자식이라고 불리고 Object Prototype Object에 있는 모든 속성을 사용할 수 있음.



